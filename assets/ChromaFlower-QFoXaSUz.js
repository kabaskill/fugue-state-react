import{o as l,u as S,f as d,r as $,j as s}from"./index-DHfW8c4l.js";import{c as k}from"./index-jjHLuPBh.js";function B(){const r=l.value.allNotes,{activeNotes:f,pianoOnce:m}=S(),x=f.map(t=>d.fromMidiSharps(t)),g=400/2,y=400/2,j=t=>{const e=t/26.67,o=t/33.33,a=t/40,i=t/11,n=t/2.8,c=t/6.67,u=t/8,M=t/4;return`M 0,0 a ${e},${e},0,0,0,${o},${-a} l ${i} ${-n} a ${c},${c},0,0,0,1,${-a} a ${u},${u},0,0,0,${-M},0 a ${c},${c},0,0,0,1,${a} l ${i},${n} a ${e},${e},0,0,0,${o},${a}z`},[h,z]=$.useState([]),[p,C]=$.useState("#000");function v(t){const e=t*2*Math.PI/12-Math.PI/2,o={x:(400/2+80/6-80)*Math.cos(e),y:(400/2+80/6-80)*Math.sin(e)};m(`${Object.keys(r)[t]}${t<3?3:4}`),C("#555"),z(a=>{const i=a.find(n=>n.x===o.x&&n.y===o.y);return i?a.filter(n=>n!==i):[...a,o]})}const w=[["C4","F4","A4","C5"],["G4","D4","B4","B5"],["C4","E4","G4","C5"]];return $.useEffect(()=>{w.forEach((t,e)=>setTimeout(()=>t.forEach(o=>m(o,1.4)),e*1500))},[]),s.jsx("div",{className:"flex flex-col size-full",children:s.jsxs("svg",{viewBox:`-80 -80 ${400+2*80} ${400+2*80}`,xmlns:"http://www.w3.org/2000/svg",textAnchor:"middle",dominantBaseline:"middle",children:[s.jsx("text",{x:400/2,y:400/2,style:{fontSize:"1.2rem"},fill:"white",children:k.detect(x)[0]}),s.jsxs("g",{transform:`translate(${g}, ${y}) `,children:[Object.keys(r).map((t,e)=>{const o=f.some(a=>d.pitchClass(d.fromMidiSharps(a))===t);return s.jsxs("g",{onClick:()=>v(e),style:{transition:"opacity 500ms ease-out",cursor:"pointer",opacity:o?"1":"0.35"},children:[s.jsx("g",{transform:` rotate(${e*30}) translate(0, -${400/8}) `,children:s.jsx("path",{d:j(400),fill:t.length>1?"#222":"#eee"})}),s.jsxs("g",{transform:`rotate(${e*30}) translate(0, -${400/2+80/6}) `,children:[s.jsx("circle",{cx:"0",cy:"0",r:400/10,fill:r[t]}),s.jsx("text",{x:"0",y:"0",fill:"white",fontFamily:"monospace",fontSize:400/10,fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",transform:`rotate(${e*-30})`,children:l.value.notation==="chromatic"?e:l.value.notation==="do-re-mi"?l.value.doremiArray[e]:t}),o&&s.jsx("circle",{cx:"0",cy:80,r:400/40,fill:r[t]})]})]},`chroma-petals-${t}`)}),h.length>1&&s.jsx("polygon",{points:h.map(t=>`${t.x},${t.y}`).join(" "),fill:p,stroke:p,strokeWidth:"4",opacity:"0.75"})]})]})})}export{B as default};
